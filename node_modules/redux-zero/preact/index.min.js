!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],n):n(t["redux-zero"]={},t.preact)}(this,function(t,i){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function p(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var u=function(){return(u=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};var n=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=n.getProps(),n.actions=n.getActions(),n.update=function(){var t=n.getProps();(function(t,n){for(var r in t)if(t[r]!==n[r])return!1;for(var r in n)if(!(r in t))return!1;return!0})(t,n.state)||n.setState(t)},n}return p(n,t),n.prototype.componentWillMount=function(){this.unsubscribe=this.context.store.subscribe(this.update)},n.prototype.componentWillUnmount=function(){this.unsubscribe(this.update)},n.prototype.getProps=function(){var t=this.props.mapToProps,n=this.context.store&&this.context.store.getState()||{};return t?t(n,this.props):n},n.prototype.getActions=function(){return function(o,i,t){o="function"==typeof o?o(i,t):o;var n={},r=function(e){n[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=o[e];return"function"==typeof i.middleware?i.middleware(i,r,t):function(t,n){if(null!=n){if(n.then)return n.then(t.setState);t.setState(n)}}(i,r.apply(void 0,[i.getState()].concat(t)))}};for(var e in o)r(e);return n}(this.props.actions,this.context.store,this.props)},n.prototype.render=function(t,n,r){var e=t.children,o=r.store;return(e&&e[0]||e)(u({store:o},n,this.actions))},n}(i.Component),s=n;var r=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return p(n,t),n.prototype.getChildContext=function(){return{store:this.props.store}},n.prototype.render=function(){return this.props.children&&this.props.children[0]||this.props.children},n}(i.Component);t.connect=function(e,o){return void 0===o&&(o={}),function(r){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return p(n,t),n.prototype.render=function(){var n=this.props;return i.h(s,u({},n,{mapToProps:e,actions:o}),function(t){return i.h(r,u({},t,n))})},n}(i.Component)}},t.Provider=r,t.Connect=n,Object.defineProperty(t,"__esModule",{value:!0})});
